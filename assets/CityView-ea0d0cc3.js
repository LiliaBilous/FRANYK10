import{h as v,i as b,_ as u,o as a,c,b as s,t as r,n as p,F as h,f as $,R as k,r as d,d as m,w as y,e as L,a as x,j as M,k as g,l as S}from"./index-2ebf09fa.js";import w from"./cities-485daa78.js";const T=v({id:"city",state:()=>({cities:null}),getters:{getCities(t){return t.cities}},actions:{async fetchCity(){return new Promise((t,n)=>{setTimeout(async()=>{if(Math.random()>.9)n(new Error("Simulated Server Error: Sorry, the server is not responding right now. Please try refreshing the page or come back later"));else{const e=await b(()=>import("./cities-485daa78.js"),[]);this.cities=e.default,t("foo")}},1e3)})}}}),I={data(){return{cities:w}},computed:{city(){return this.cities.find(t=>t.name===this.$route.name)}}},N={class:"city__img-holder"},E={class:"city__header"},V=["innerHTML"],B={class:"button-wrapper"},R={href:"#articles-cafes",class:"button"},z={class:"desctiption-city-block"},F=["innerHTML"],H={class:"city-info-wrap"},P={class:"city-info-item"},G={class:"city-info-item"};function O(t,n,e,f,o,i){return a(),c(h,null,[s("div",{class:p(["photo-city-wrap",i.city.bannerImgClass])},[s("div",N,[s("h2",E,r(i.city.bannerTitle),1),s("p",{class:"city__text-wrap",innerHTML:i.city.bannerText},null,8,V),s("div",B,[s("a",R,r(i.city.buttonText),1)])])],2),s("div",z,[s("p",{class:"desctiption-text-wrap",innerHTML:i.city.descrText},null,8,F)]),s("div",H,[s("div",P,"Рік заснування - "+r(i.city.yearOfFoundation)+" року",1),s("div",{class:p(["city-info-item",i.city.cityLogoClass])},null,2),s("div",G,"Населення - "+r(i.city.population)+" осіб",1)])],64)}const j=u(I,[["render",O]]),D={data(){return{cities:w,cafes:$,map:null}},computed:{city(){return this.cities.find(t=>t.name===this.$route.name)},cityCafes(){return this.cafes.filter(t=>t.city===this.$route.name)}},mounted(){this.initMap()},methods:{async initMap(){const{Map:t}=await window.google.maps.importLibrary("maps");this.map=new t(document.getElementById("map"),{center:{lat:Number(this.city.lat),lng:Number(this.city.lng)},zoom:13});const n={url:"../coffee-bean-filled-roast-brew-svgrepo-com.svg",scaledSize:new window.google.maps.Size(25,25)};this.cityCafes.forEach(e=>{new window.google.maps.Marker({position:{lat:Number(e.lat),lng:Number(e.lng)},map:this.map,title:e.name,icon:n})})}}},A={class:"city-map-wrap",id:"map"};function U(t,n,e,f,o,i){return a(),c("div",A)}const q=u(D,[["render",U]]),J={props:{cafe:Object},components:{RouterLink:k}},K={class:"article-wrapper"},Q={class:"article-name"},W={class:"article-text"},X={class:"article-description"};function Y(t,n,e,f,o,i){const _=d("router-link"),l=d("RouterLink");return a(),c("div",K,[m(_,{to:`/cafes/${e.cafe.id}`,class:p(["article__link-holder",e.cafe.imageUrlClass])},{default:y(()=>[s("h3",Q,r(e.cafe.title),1)]),_:1},8,["to","class"]),s("div",W,[s("p",X,r(e.cafe.text),1),m(l,{to:`/cafes/${e.cafe.id}`,class:"button"},{default:y(()=>[L(" Відвідати заклад ")]),_:1},8,["to"])])])}const Z=u(J,[["render",Y]]),tt={components:{CafeItem:Z},data(){return{cafes:$}},computed:{cityCafes(){return this.cafes.filter(t=>t.city===this.$route.name)}}},et={class:"article-block-cafes",id:"articles-cafes"};function st(t,n,e,f,o,i){const _=d("CafeItem");return a(),c("div",et,[(a(!0),c(h,null,x(i.cityCafes,l=>(a(),M(_,{key:l.id,cafe:l},null,8,["cafe"]))),128))])}const it=u(tt,[["render",st]]),at={components:{CityInfo:j,GoogleMap:q,CafeList:it},data(){return{cityStore:T(),errorMessage:"",isLoading:!0}},computed:{cities(){return this.cityStore.getCities},city(){return this.cities?this.cities.find(t=>t.name===this.$route.name):null}},methods:{async init(){try{await this.cityStore.fetchCity()}catch(t){this.errorMessage=t.message}finally{this.isLoading=!1}}},created(){this.init()}},ct={class:"main-content"},nt={key:0,class:"loader"},ot=S('<div class="cup"><span class="steam"></span><span class="steam"></span><span class="steam"></span><div class="cup-handle"></div></div>',1),rt=[ot],lt={key:1,class:"error"};function dt(t,n,e,f,o,i){const _=d("CityInfo"),l=d("GoogleMap"),C=d("CafeList");return a(),c("main",ct,[o.isLoading?(a(),c("div",nt,rt)):g("",!0),o.errorMessage?(a(),c("div",lt,r(o.errorMessage),1)):i.city?(a(),c(h,{key:2},[m(_),m(l),m(C)],64)):g("",!0)])}const ut=u(at,[["render",dt]]);export{ut as default};
