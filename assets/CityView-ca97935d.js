import{u as y}from"./cities-c42a5df5.js";import{_ as f,o as a,c,b as t,t as o,n as p,F as g,u as $,f as h,h as v,R as M,r as _,d as u,w as C,e as k,a as S,i as b}from"./index-58f592fb.js";const x={data(){return{cityStore:y()}},computed:{cities(){return this.cityStore.getCities},city(){return this.cities.find(e=>e.name===this.$route.name)}}},L={class:"city__img-holder"},T={class:"city__header"},I=["innerHTML"],N={class:"button-wrapper"},V={href:"#articles-cafes",class:"button"},B={class:"desctiption-city-block"},F=["innerHTML"],z={class:"city-info-wrap"},E={class:"city-info-item"},G={class:"city-info-item"};function H(e,r,i,m,n,s){return a(),c(g,null,[t("div",{class:p(["photo-city-wrap",s.city.bannerImgClass])},[t("div",L,[t("h2",T,o(s.city.bannerTitle),1),t("p",{class:"city__text-wrap",innerHTML:s.city.bannerText},null,8,I),t("div",N,[t("a",V,o(s.city.buttonText),1)])])],2),t("div",B,[t("p",{class:"desctiption-text-wrap",innerHTML:s.city.descrText},null,8,F)]),t("div",z,[t("div",E," Рік заснування - "+o(s.city.yearOfFoundation)+" року ",1),t("div",{class:p(["city-info-item",s.city.cityLogoClass])},null,2),t("div",G,"Населення - "+o(s.city.population)+" осіб",1)])],64)}const R=f(x,[["render",H]]);const O={data(){return{errorMessage:"",isLoading:!0,cityStore:y(),cafeStore:$(),map:null,marker:null}},computed:{cities(){return this.cityStore.getCities},city(){return this.cities.find(e=>e.name===this.$route.name)},cafes(){return this.cafeStore.getCafes},cityCafes(){return this.cafes.filter(e=>e.city===this.$route.name)}},methods:{async initMap(){const{Map:e}=await window.google.maps.importLibrary("maps");this.map=new e(document.getElementById("map"),{center:{lat:Number(this.city.lat),lng:Number(this.city.lng)},zoom:14});const r={url:"/TOPCAFES/coffee-bean.svg",scaledSize:new window.google.maps.Size(20,20)};this.cityCafes.forEach(i=>{new window.google.maps.Marker({position:{lat:Number(i.lat),lng:Number(i.lng)},map:this.map,title:i.name,icon:r})})}},mounted(){this.cafeStore.fetchCafes().then(()=>{this.initMap()}).catch(e=>{this.errorMessage=e.message,console.log(e)}).finally(()=>{this.isLoading=!1})}},j={class:"google-map"},A={key:0,class:"loader"},D=v('<div class="cup"><span class="steam"></span><span class="steam"></span><span class="steam"></span><div class="cup-handle"></div></div>',1),P=[D],U={key:1,class:"error"},q=t("div",{class:"city-map-wrap",id:"map"},null,-1);function J(e,r,i,m,n,s){return a(),c("section",j,[n.isLoading?(a(),c("div",A,P)):h("",!0),n.errorMessage?(a(),c("div",U,o(n.errorMessage),1)):h("",!0),q])}const K=f(O,[["render",J]]),Q={props:{cafe:Object},components:{RouterLink:M}},W={class:"article-wrapper"},X={class:"article-name"},Y={class:"article-text"},Z={class:"article-description"};function ee(e,r,i,m,n,s){const d=_("router-link"),l=_("RouterLink");return a(),c("div",W,[u(d,{to:`/cafes/${i.cafe.id}`,class:p(["article__link-holder",i.cafe.imageUrlClass])},{default:C(()=>[t("h3",X,o(i.cafe.title),1)]),_:1},8,["to","class"]),t("div",Y,[t("p",Z,o(i.cafe.text),1),u(l,{to:`/cafes/${i.cafe.id}`,class:"button"},{default:C(()=>[k(" Відвідати заклад ")]),_:1},8,["to"])])])}const te=f(Q,[["render",ee]]),se={components:{CafeItem:te},data(){return{cafeStore:$()}},computed:{cafes(){return this.cafeStore.getCafes},cityCafes(){return this.cafes?this.cafes.filter(e=>e.city===this.$route.name):null}}},ie={class:"article-block-cafes",id:"articles-cafes"};function ae(e,r,i,m,n,s){const d=_("CafeItem");return a(),c("div",ie,[(a(!0),c(g,null,S(s.cityCafes,l=>(a(),b(d,{key:l.id,cafe:l},null,8,["cafe"]))),128))])}const ce=f(se,[["render",ae]]),ne={components:{CityInfo:R,GoogleMap:K,CityCafes:ce},data(){return{cityStore:y(),errorMessage:"",isLoading:!0}},computed:{cities(){return this.cityStore.getCities},city(){return this.cities?this.cities.find(e=>e.name===this.$route.name):null}},methods:{async init(){try{await this.cityStore.fetchCity()}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}}},created(){this.init()}},oe={class:"main-content"},re={key:0,class:"loader"},le=v('<div class="cup"><span class="steam"></span><span class="steam"></span><span class="steam"></span><div class="cup-handle"></div></div>',1),_e=[le],de={key:1,class:"error"};function ue(e,r,i,m,n,s){const d=_("CityInfo"),l=_("GoogleMap"),w=_("CityCafes");return a(),c("main",oe,[n.isLoading?(a(),c("div",re,_e)):h("",!0),n.errorMessage?(a(),c("div",de,o(n.errorMessage),1)):s.city?(a(),c(g,{key:2},[u(d),u(l),u(w)],64)):h("",!0)])}const he=f(ne,[["render",ue]]);export{he as default};
